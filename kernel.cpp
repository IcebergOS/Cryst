//=============================================================================
// ■ kernel.c
//-----------------------------------------------------------------------------
//   这个文件是干什么的？
//=============================================================================

#include "config.h"

#include "Basic/types.h"
#include "Basic/io.h"
#include "Basic/memory.h"

/*	debug	*/
#include "Basic/debug.h"

//---------------------------------------------------------------------------
// ● Multiarch初始化
//---------------------------------------------------------------------------
void arch_init () {

	Memory mem = Memory();

	return;
}

//---------------------------------------------------------------------------
// ● 内核IDLE
//---------------------------------------------------------------------------
void idle () {

#ifdef DEBUG
	debugputchar('K');
#endif

	IO io = IO();
	for (;;) {
		io.cpu_hlt ();	// 挂起
	}

	return;
}

extern "C" {
//---------------------------------------------------------------------------
// ● 主程序
//---------------------------------------------------------------------------
void kernel_main() {

	arch_init ();

	idle ();
}
}
