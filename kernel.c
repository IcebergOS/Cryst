//=============================================================================
// ■ kernel.c
//-----------------------------------------------------------------------------
//   这个文件是干什么的？
//=============================================================================

#define X86DEBUG

#include "types.h"

//---------------------------------------------------------------------------
// ● 根据地址写入内存
//---------------------------------------------------------------------------
void write_memory(int address, char value) {
	*((char*) address) = value;
}

#ifdef X86DEBUG
void x86debugputchar(char c) {	// 调试用，等IO OBJ完成支持驱动之后就扔了
	write_memory(0xb8000,c);
}
#endif

//---------------------------------------------------------------------------
// ● 主程序
//---------------------------------------------------------------------------
void kernel_main() {
	
#ifdef X86DEBUG
	x86debugputchar('K'); // 进了kernel了
#endif
	
	for (;;) {
		__asm__ ("hlt");	// 挂起
	}
}
